# 兒童口說加法練習

單頁靜態網頁，讓家長陪著孩子用口說練習 0-9 加法。支援手機直立與橫放，提供滑動與鍵盤兩種判定操作，並搭配猴子跑步遊戲增強視覺互動。依總正確題數播放不同等級的結束動畫。

練習開始前可自訂：

- 練習時間（1 / 2 / 3 分鐘）
- 題目總和上限（不超過 10 / 12 / 15）
- 是否包含 0（要或不要）
- 答題時限（不限時 / 1-4 秒，超過視為答錯）
- 答題限速（不限速 / 1-3 秒，用於統計慢速題目）

## 功能亮點

- ⏱️ **多時間與設定選擇**：1/2/3 分鐘、總和上限、零、時限、限速任選組合，進入練習前會自動倒數 3 秒。
- 🐵 **猴子跑步遊戲**：10 格跑道，猴子從位置 5 開始，答對往右、答錯往左，到位置 0 被鱷魚吃掉時遊戲結束。增強視覺動機與遊戲感。
- 📳 **全螢幕滑動判定**：右滑/✔️= 正確、左滑/✖️= 錯誤，中間題目區塊放大，底部以淡色文字提醒操作。Landscape 模式會放大滑動範圍以便雙手持握。
- ⚙️ **彈性題目與時間設定**：開局前即可決定題目總和上限、是否出現 0、每題答題時間限制與慢速門檻，快速因應不同年齡段與練習需求。
- 🗂️ **預先建立 200 題題庫**：開始練習時先隨機建立 200 題，之後即從題庫依序播放，避免每次重新產生題目造成畫面閃爍。
- 🧮 **題庫品質保證**：產生題庫時會排除 0+0、0+1（含對調）等題目，並強制將答案 4–10 平均分配，且不會連續出現兩題一樣的題目，確保練習涵蓋各種和數。同時限制含 0 或 1 的題目比例不超過 10%。
- 📋 **題庫除錯日誌**：每次產生題庫後自動在瀏覽器控制台輸出所有題目清單，方便檢查與驗證。
- ⏰ **即時計時與成績**：畫面頂部僅顯示倒數時間，結束後的結果頁提供正確/錯誤/總題數與正確率。超過時限的題目會自動標記。
- 📊 **答題統計與分析**：結果頁分別顯示「答錯的題目」和「答對但超過限速的題目」，幫助家長了解孩子的學習狀況。
- 💪 **加強練習模式**：遊戲結束後，若有錯誤或慢速題目（至少 2 題），會顯示「💪加強練習」按鈕。點擊後會分析這些題目中的困難數字，並以這些數字組合成新的題庫進行下一輪練習，讓孩子針對弱點加強訓練。Console 會輸出詳細的數字統計分析。
- 🎉 **五種等級動畫**：依正確題數顯示「太驚人了 / 超級棒 / 厲害 / 不錯 / 再加油」動畫與相應的動感效果，CSS keyframes 與 JS 控制觸發與自動清理 (6–8 秒)。
- ♿ **可及性**：按鈕含 aria-label、結果區 `role="status"`、支援鍵盤 ←/→/A/D 輔助操作。

## 檔案結構

```
index.html   # 主畫面與五個 screen 容器（首頁、倒數、遊戲、結果）
style.css    # 所有版面、響應式、猴子遊戲、動畫樣式
app.js       # 行為邏輯、計時、滑動、猴子遊戲、加強練習、結果動畫
spec.md      # 完整規格文件
README.md    # 本說明
```

## 如何使用

1. 直接以瀏覽器開啟 `index.html`，或在專案根目錄使用任意靜態伺服器。
2. 選擇練習時間、題目總和上限、是否包含 0、答題時限與限速，再按「開始練習」。
3. 倒數 3 秒後進入遊戲：小朋友口說答案，家長以左右滑動（或鍵盤 ← / →/ A / D）判定對錯，同時觀看猴子跑步進度。
4. 時間到或猴子被吃掉時顯示結果頁，顯示正確率、答題統計與等級動畫。
5. 可選「💪加強練習」（如果有錯誤或慢速題目）針對困難題目加強、「再來一次」重新倒數、或「回首頁」重新選設定。


## 自訂建議

- **調整題庫平衡性**：修改 `app.js` 中 `BALANCED_SUM_MIN / BALANCED_SUM_MAX` 常數即可改變答案範圍；若要排除其他題型，編輯 `isZeroPairDisallowed()` 或 `getValidPairsForSum()` 的邏輯。
- **改變時間選項**：在 `index.html` 的 `.time-option` 加入/調整 `data-seconds` 即可。
- **調整答題時限與限速選項**：在 `index.html` 的 `[data-time-limit]` 與 `[data-slow-threshold]` 加入/調整按鈕即可。
- **調整等級門檻或文案**：編輯 `app.js` 中 `levelConfig` 物件與 `getLevelKey()` 函式即可快速更新分數範圍或訊息。
- **猴子遊戲調整**：修改 `app.js` 中的 `.track-cell` 個數或初始位置 `monkeyPosition: 5` 即可改變難度。
- **動畫樣式**：所有 keyframes 與色彩集中在 `style.css`，可依品牌色調整。

## 測試重點

- 手機橫放時滑動區塊依比例放大，版面自動切換 `.layout--landscape`。
- 滑動閾值跟視窗大小連動（`min(window.innerWidth * 0.12, 80)`），避免誤判。
- 開始鈕需在所有五項設定完成後才會啟用。
- 正確題數落在各等級區間時，能對應顯示相應等級的動畫並於 6–8 秒內自動停止。
- 猴子位置、遊戲狀態訊息、答題統計、加強練習分析等功能正常運作。

歡迎依實際教學需求調整色彩、題庫、難度或加入語音提示！

## 測試重點 (對應 spec)

- 手機橫放時滑動區塊依比例放大，版面自動切換 `.layout--landscape`。
- 滑動閾值跟視窗大小連動（`min(window.innerWidth * 0.12, 80)`），避免誤判。
- 開始鈕需在「時間 / 總和上限 / 是否包含 0」三項設定完成後才會啟用；翻轉螢幕後再次練習仍沿用上一次設定。
- 正確題數落在 30 / 20 / 15 / 0 區間時，能對應顯示「驚人 / 超級棒 / 不錯 / 再加油」動畫並於 6–8 秒內自動停止。
- 按「回首頁」會清除動畫、停掉計時並要求重新選時間。

歡迎依實際教學需求調整色彩、題庫或加入語音提示！
